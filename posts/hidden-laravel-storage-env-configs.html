<!DOCTYPE html>
<html lang="vi">
<head>
	<title>Some hidden laravel storage env configs you don&#039;t know | daudau's blog</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="By default in your Laravel application, you ussually have those folders">
	<link rel="icon" type="image/png" href="/images/favicon-32x32.png">
    <link rel="stylesheet" type="text/css" href="/css/app.css">
    <link rel="preconnect" href="https://fonts.gstatic.com">
	<link href="https://fonts.googleapis.com/css2?family=Inconsolata:wght@400&display=swap" rel="stylesheet">
</head>
<body>
	<div class="main-body flex flex-col min-h-screen px-5 pt-5 max-w-xl">
		 <div class="flex space-x-5 flex-none">
	<a href="/" class="text-gray-500 hover:underline">Home</a>
    <a href="/open-source.html" class="text-gray-500 hover:underline">Open source</a>
    <a href="/wakatime.html" class="text-gray-500 hover:underline">wakatime</a>
</div>
 

		<div class="mt-20 flex-grow flex-shrink flex-1">
			<div id="post">
	    <h1 class="text-cyan-600 text-3xl mb-10 text-bold">Some hidden laravel storage env configs you don&#039;t know</h1>
	    <div class="mt-5 leading-7 post-content font-light text-lg">
	        <p>By default in your Laravel application, you ussually have those folders</p>
<ul>
<li><code>bootstrap/cache</code>: where to stores your application cached files: routes, configs, events</li>
<li><code>storage/</code>:  wherer to storage compiled views, cache, session files, logs and upload files, etc</li>
</ul>
<p>About storage folder when deployment, i acctually just create an folder outside of the application and make a symbol link to the app, so we dont erease out uploaded files every time we deploy, and i think you doo too.</p>
<p>But acctually if you look at code at <a href="https://github.com/laravel/framework/blob/72ea328b456ea570f8823c69f511583aa6234170/src/Illuminate/Foundation/Application.php"><code>Illuminate/Foundation/Application.php</code></a> you can see there are some hiddens env config maybe useful sometimes.</p>
<h2>Customize your storage path</h2>
<p>You can modify default storage path in the <code>bootstrap/app.php</code> by calling this function</p>
<pre><code class="language-php">public function useStoragePath($path)
{
    $this-&gt;storagePath = $path;

    $this-&gt;instance('path.storage', $path);

    return $this;
}</code></pre>
<p>Now take a look this function, if our value starts with any absolute prefixes <code>/</code> or <code>\</code>, so it will use absolute path, other wise relative path</p>
<pre><code class="language-php">protected function normalizeCachePath($key, $default)
{
    if (is_null($env = Env::get($key))) {
        return $this-&gt;bootstrapPath($default);
    }

    return Str::startsWith($env, $this-&gt;absoluteCachePathPrefixes)
            ? $env
            : $this-&gt;basePath($env);
}</code></pre>
<p>And there are some hidden config if you want to customize the <code>bootstrap/cache</code> folder. This will usefull when use want to ship application in some where you don't  have write permission in the application folder xD.</p>
<ul>
<li><code>APP_SERVICES_CACHE</code></li>
<li><code>APP_PACKAGES_CACHE</code></li>
<li><code>APP_CONFIG_CACHE</code></li>
<li><code>APP_ROUTES_CACHE</code></li>
<li><code>APP_EVENTS_CACHE</code></li>
</ul>
	    </div>
	</div>
		</div>

		<footer class="flex-none flex justify-between h-12 border-t pt-3">
			<p>crafted by <a href="http://github.com/bangnokia/pekyll" target="_blank">pekyll</a> with ❤️.</p>
			<div>
				<a href="https://github.com/bangnokia" title="github">github</a>
				<a href="https://facebook"></a>
			</div>
		</footer>
	</div>

	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-37232412-22"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());

	  gtag('config', 'UA-37232412-22');
	</script>
</body>
</html>
 
