<!DOCTYPE html>
<html lang="en">
<head>
	<title>Hidden laravel config env paths maybe you don&#039;t know | daudau's blog</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="There are some interesting env config keys of Laravel didn&#039;t mention in official documentation about storage path and cache path. May be you will never need to ">
	<link rel="icon" type="image/png" href="/images/favicon-32x32.png">
    <link rel="stylesheet" type="text/css" href="/css/app.css?v=1617122407">
    <link rel="preconnect" href="https://fonts.gstatic.com">
	<link href="https://fonts.googleapis.com/css2?family=Inconsolata:wght@400&display=swap" rel="stylesheet">
            <link rel="stylesheet" href="https://unpkg.com/@highlightjs/cdn-assets@10.6.0/styles/default.min.css">
    </head>
<body>
	<div class="main-body mx-auto flex flex-col min-h-screen px-5 pt-5 max-w-2xl">
		 <div class="flex space-x-5 flex-none">
	<a href="/" class="text-gray-500 hover:underline">Home</a>
    <a href="/open-source.html" class="text-gray-500 hover:underline">Open source</a>
</div>
 

		<div class="mt-20 flex-grow flex-shrink flex-1">
			<div id="post">
	    <h1 class="text-cyan-600 text-3xl mb-5 font-bold">Hidden laravel config env paths maybe you don&#039;t know</h1>
	    <div class="text-gray-400">
            <span>Published on</span>
            <time datetime="2021-03-18">
                Mar 18th 2021
            </time>
        </div>

        <div class="relative block">
            <div class="post-content mt-5 leading-7 post-content font-light text-lg box-border break-words">
                <p>There are some interesting env config keys of Laravel didn't mention in official documentation about storage path and cache path. May be you will never need to custom them in you entire developer life, but i think just know their existence, it's fun!</p>
<p>By default in your Laravel application, you ussually have those folders:</p>
<ul>
<li><code>bootstrap/cache</code>: <em>stores your application cached files such as routes, configs, events</em></li>
<li><code>storage/</code>:  <em>stores compiled views, cache, session files, logs and upload files, etc</em></li>
</ul>
<p>About storage folder when deployment, i acctually just create an folder outside of the application and make a symbol link to the app, so we dont erase out uploaded files every time we deploy, and i think you doo too.</p>
<p>But acctually if you look at code at <a href="https://github.com/laravel/framework/blob/72ea328b456ea570f8823c69f511583aa6234170/src/Illuminate/Foundation/Application.php"><code>Illuminate/Foundation/Application.php</code></a> you can see there are some hidden env configs maybe useful sometimes.</p>
<h2 id="customize-storage-path">Customize storage path</h2>
<p>You can modify default storage path  by calling <code>$app-&gt;useStoragePath($yourPath)</code> in the <code>bootstrap/app.php</code>.</p>
<pre><code class="language-php">public function useStoragePath($path)
{
    $this-&gt;storagePath = $path;

    $this-&gt;instance('path.storage', $path);

    return $this;
}</code></pre>
<h2 id="customize-framework-cache-paths">Customize framework cache paths</h2>
<p>Now take a look at this <code>normalizeCachePath</code> function, if our value starts with any absolute prefixes <code>/</code> or <code>\</code>, so it will use absolute path, other wise relative path.</p>
<pre><code class="language-php">protected function normalizeCachePath($key, $default)
{
    if (is_null($env = Env::get($key))) {
        return $this-&gt;bootstrapPath($default);
    }

    return Str::startsWith($env, $this-&gt;absoluteCachePathPrefixes)
            ? $env
            : $this-&gt;basePath($env);
}</code></pre>
<p>And there are some hidden config if you want to customize the <code>bootstrap/cache</code> folder. This will useful when use want to ship application in some where you don't  have write permission in the application folder xD.</p>
<p>You can set values for these keys in the <code>.env</code> file:</p>
<ul>
<li><code>APP_SERVICES_CACHE</code></li>
<li><code>APP_PACKAGES_CACHE</code></li>
<li><code>APP_CONFIG_CACHE</code></li>
<li><code>APP_ROUTES_CACHE</code></li>
<li><code>APP_EVENTS_CACHE</code></li>
</ul>
            </div>
            <div class="absolute top-0 right-0 h-full z-0">
                 <div class="fixed hidden lg:block fixed" x-data="makeData()">
    <div class="table-of-contents w-96 sticky top-0 right-0 pt-5 pl-5">
        <ol class="list-decimal list-inside">
            <template x-for="item in items" :key="item.id">
                <li class="transition text-gray-300 hover:text-gray-500">
                    <a x-bind:href="`#${item.id}`" x-text="item.label" class="transition text-gray-300 hover:no-underline hover:text-gray-500"></a>
                </li>
            </template>
        </ol>
    </div>
</div>

 
            </div>
        </div>

	    <!-- tags -->
	    	    	<div class="mt-5">
	    		<strong>Tags:</strong>
	    			    			<span class="tag bg-gray-200 px-2 py-1 cursor-pointer hover:bg-red-300">laravel</span>
	    			    	</div>
	    	</div>
		</div>

		<footer class="text-sm flex justify-end h-12 border-t pt-3 mt-10 space-x-2">
			<a href="https://github.com/bangnokia" title="github">my github</a>
			<span>|</span>
			<a href="/wakatime.html">wakatime</a>
			<span>|</span>
			<p>crafted by <a href="http://github.com/bangnokia/pekyll" target="_blank">pekyll</a> with ❤️.</p>
		</footer>
	</div>

    <script src="https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.8.1/dist/alpine.min.js" defer></script>
    <script>
        function makeData() {
            const elements = document.querySelectorAll('h2');
            const items = [...elements].map(function (ele) {
                return {
                    id: ele.getAttribute('id'),
                    label: ele.textContent
                };
            });
            return {
                items: items
            };
        }
    </script>
        <script src="https://unpkg.com/@highlightjs/cdn-assets@10.6.0/highlight.min.js"></script>
        <script src="https://unpkg.com/@highlightjs/cdn-assets@10.6.0/languages/php.min.js"></script>
        <script>hljs.highlightAll();</script>
    
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-37232412-22"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());
	  gtag('config', 'UA-37232412-22');
	</script>
</body>
</html>
 
