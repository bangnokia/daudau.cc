<!DOCTYPE html>
<html lang="en">
<head>
	<title>Hidden laravel config env paths maybe you don&#039;t know - daudau&#039;s blog</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="There are some interesting env config keys of Laravel didn&#039;t mention in official documentation about storage path and cache path. May be you will never need to ">

    <meta name="twitter:creator" content="@bangnokia">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:description" content="There are some interesting env config keys of Laravel didn&#039;t mention in official documentation about storage path and cache path. May be you will never need to ">

    <meta name="og:title" content="Hidden laravel config env paths maybe you don&#039;t know - daudau&#039;s blog">
    <meta name="og:description" content="There are some interesting env config keys of Laravel didn&#039;t mention in official documentation about storage path and cache path. May be you will never need to ">
    <meta name="og:type" content="article">

    
	<link rel="icon" type="image/png" href="/images/favicon-32x32.png">
    <link rel="stylesheet" type="text/css" href="/css/app.css?v=1618569047">
    <link rel="preconnect" href="https://fonts.gstatic.com">
	<link href="https://fonts.googleapis.com/css2?family=Inconsolata:wght@400&display=swap" rel="stylesheet">

            <link rel="stylesheet" href="https://unpkg.com/@highlightjs/cdn-assets@10.6.0/styles/default.min.css">
    </head>
<body>
	<div class="main-body mx-auto flex flex-col min-h-screen px-5 pt-5 max-w-2xl">
		 <div class="flex space-x-5 flex-none">
	<a href="/" class="text-gray-500 hover:underline">Home</a>
    <a href="/open-source.html" class="text-gray-500 hover:underline">Open source</a>
</div>
 

		<div class="mt-20 flex-grow flex-shrink flex-1">
			<div id="post">
        <h1 class="text-cyan-600 text-3xl mb-5 font-bold">Hidden laravel config env paths maybe you don&#039;t know</h1>
        <div class="text-gray-400 text-sm mb-10 flex items-center">
            <span>
               Published on <time datetime="2021-03-18" class="tracking-tight">
                    Mar, 18 2021
                </time>
            </span>
             <a href="https://github.com/bangnokia/daudau.cc/blob/master/posts/2021-03-18-hidden-laravel-env-config-paths.md" title="edit this post" target="_blank" class="ml-5 text-gray-400">
    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
    </svg>
</a>
 
        </div>

        <div class="relative block">
            <div class="post-content mt-5 leading-7 post-content font-light text-lg box-border break-words">
                <p>There are some interesting env config keys of Laravel didn't mention in official documentation about storage path and cache path. May be you will never need to custom them in you entire developer life, but i think just know their existence, it's fun!</p>
<p>By default in your Laravel application, you ussually have those folders:</p>
<ul>
<li><code>bootstrap/cache</code>: <em>stores your application cached files such as routes, configs, events</em></li>
<li><code>storage/</code>:  <em>stores compiled views, cache, session files, logs and upload files, etc</em></li>
</ul>
<p>About storage folder when deployment, i acctually just create an folder outside of the application and make a symbol link to the app, so we dont erase out uploaded files every time we deploy, and i think you doo too.</p>
<p>But acctually if you look at code at <a href="https://github.com/laravel/framework/blob/72ea328b456ea570f8823c69f511583aa6234170/src/Illuminate/Foundation/Application.php">Illuminate/Foundation/Application.php</a> you can see there are some hidden env configs maybe useful sometimes.</p>
<h2 id="customize-storage-path" name="customize-storage-path">Customize storage path</h2>
<p>You can modify default storage path  by calling <code>$app-&gt;useStoragePath($yourPath)</code> in the <code>bootstrap/app.php</code>.</p>
<pre><code class="language-php">public function useStoragePath($path)
{
    $this-&gt;storagePath = $path;

    $this-&gt;instance('path.storage', $path);

    return $this;
}</code></pre>
<h2 id="customize-framework-cache-paths" name="customize-framework-cache-paths">Customize framework cache paths</h2>
<p>Now take a look at this <code>normalizeCachePath</code> function, if our value starts with any absolute prefixes <code>/</code> or <code>\</code>, so it will use absolute path, other wise relative path.</p>
<pre><code class="language-php">protected function normalizeCachePath($key, $default)
{
    if (is_null($env = Env::get($key))) {
        return $this-&gt;bootstrapPath($default);
    }

    return Str::startsWith($env, $this-&gt;absoluteCachePathPrefixes)
            ? $env
            : $this-&gt;basePath($env);
}</code></pre>
<p>And there are some hidden config if you want to customize the <code>bootstrap/cache</code> folder. This will useful when use want to ship application in some where you don't  have write permission in the application folder xD.</p>
<p>You can set values for these keys in the <code>.env</code> file:</p>
<ul>
<li><code>APP_SERVICES_CACHE</code></li>
<li><code>APP_PACKAGES_CACHE</code></li>
<li><code>APP_CONFIG_CACHE</code></li>
<li><code>APP_ROUTES_CACHE</code></li>
<li><code>APP_EVENTS_CACHE</code></li>
</ul>
            </div>
            <div class="absolute top-0 right-0 h-full z-0">
                 <div class="fixed hidden lg:block fixed" x-data="tableOfContents()">
    <div class="table-of-contents w-96 sticky top-0 right-0 pt-5 pl-5">
        <ol class="list-decimal list-inside">
            <template x-for="item in items" :key="item.id">
                <li class="transition text-gray-300 hover:text-gray-500"><a x-bind:href="`#${item.id}`" x-text="item.label" class="transition text-gray-300 hover:no-underline hover:text-gray-500"></a>

                    <template x-if="item.children.length">
                        <ol class="list-decimal list-inside ml-5">
                            <template x-for="subItem in item.children" :key="subItem.id">
                                <li class="transition text-gray-300 hover:text-gray-500"><a x-bind:href="`#${subItem.id}`" x-text="subItem.label" class="transition text-gray-300 hover:no-underline hover:text-gray-500"></a>
                                </li>
                            </template>
                        </ol>
                    </template>
                </li>
            </template>
        </ol>
    </div>
</div>

 
            </div>
        </div>

        <!-- tags -->
                    <div class="mt-10">
                <strong>Tags:</strong>
                                    <span class="tag bg-gray-200 px-2 py-1 cursor-pointer hover:bg-red-300">laravel</span>
                            </div>
        
    </div>

    <div class="mt-10">
        <script src="https://utteranc.es/client.js"
            repo="bangnokia/daudau.cc"
            issue-term="pathname"
            label="comment"
            theme="github-light"
            crossorigin="anonymous"
            async>
        </script>
    </div>
		</div>

		<footer class="text-sm flex justify-end h-12 border-t pt-3 mt-10 space-x-2">
			<a href="/about.html" title="github" class="text-gray-500">about</a>
			<span>-</span>
			<p>crafted by <a href="http://github.com/bangnokia/pekyll" target="_blank">pekyll</a> with ❤️.</p>
		</footer>
	</div>

    <script src="https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.8.1/dist/alpine.min.js" defer></script>
    <script>
        function tableOfContents() {
             const items = [...document.querySelectorAll('h2, h3')].map(function (ele) {
                return {
                    id: ele.getAttribute('id'),
                    label: ele.textContent,
                    level: parseLevel(ele.nodeName),
                    children: []
                };
            });

            let tree = [];
            for (let i = 0; i < items.length; i++) {
                let item = items[i];
                if (item.level === 2) {
                    tree.push(item);
                }

                if (item.level === 3) {
                    tree[tree.length - 1].children.push(item);
                }
            }

            return {items: tree};
        }

        function parseLevel(heading) {
            return parseInt(heading.substr(1,1));
        }
    </script>
        <script src="https://unpkg.com/@highlightjs/cdn-assets@10.6.0/highlight.min.js"></script>
        <script src="https://unpkg.com/@highlightjs/cdn-assets@10.6.0/languages/php.min.js"></script>
        <script>hljs.highlightAll();</script>
    
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-37232412-22"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());
	  gtag('config', 'UA-37232412-22');
	</script>
</body>
</html>
 
